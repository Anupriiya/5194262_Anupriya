#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LEN 1000005 
#define MAX_OPS 1000005   
typedef struct {
    int type;      
    char *str;     
    int len;       
} Operation;

Operation history[MAX_OPS];
int top = -1;

char S[MAX_LEN]; 
int slen = 0;    

void push(Operation op) {
    history[++top] = op;
}

Operation pop() {
    return history[top--];
}

int main() {
    int Q;
    scanf("%d", &Q);

    for (int i = 0; i < Q; i++) {
        int type;
        scanf("%d", &type);

        if (type == 1) {
            char W[MAX_LEN];
            scanf("%s", W);
            int wlen = strlen(W);
            Operation op;
            op.type = 1;
            op.len = wlen;
            op.str = NULL;
            push(op);
            strcpy(S + slen, W);
            slen += wlen;
        }
        else if (type == 2) {
            int k;
            scanf("%d", &k);
            Operation op;
            op.type = 2;
            op.len = k;
            op.str = (char*)malloc((k + 1) * sizeof(char));
            strncpy(op.str, S + slen - k, k);
            op.str[k] = '\0';
            push(op);
            slen -= k;
            S[slen] = '\0';
        }
        else if (type == 3) {
            int k;
            scanf("%d", &k);
            printf("%c\n", S[k - 1]);
        }
        else if (type == 4) {
            Operation op = pop();
            if (op.type == 1) {
                slen -= op.len;
                S[slen] = '\0';
            }
            else if (op.type == 2) {
                strcpy(S + slen, op.str);
                slen += op.len;
                free(op.str);
            }
        }
    }
    return 0;
}